syntax = "proto3";

package calendar;

option go_package = "calendarGRPC/pb;pb";
//option go_package = "github.com/whatafunc/Golang_Otus_Labs/hw12_13_14_15_calendar/calendarGRPC/pb;pb";


// ====================
// Messages
// ====================

message Event {
  int32 id = 1;
  string title = 2;
  string description = 3;
  string start_time = 4; // ISO8601 format
  string end_time = 5;   // ISO8601 format
}

message CreateEventRequest {
  Event event = 1;
}

message CreateEventResponse {
  bool success = 1;
  string error = 2;
}

message GetEventRequest {
  int32 id = 1;
}

message GetEventResponse {
  Event event = 2;
}

message ListEventsRequest {
  string date = 1; // YYYY-MM-DD
}

message ListEventsResponse {
  bool success = 1;
  repeated Event events = 2;
  string error = 3;
}

message UpdateEventRequest {
  Event event = 1;
}

message UpdateEventResponse {
  bool success = 1;
  string error = 2;
}

message DeleteEventRequest {
  int32 id = 1;
}

message DeleteEventResponse {
  bool success = 1;
  string error = 2;
}

// ====================
// Service
// ====================

service CalendarService {
  rpc CreateEvent(CreateEventRequest) returns (CreateEventResponse);
  rpc GetEvent(GetEventRequest) returns (GetEventResponse);

  rpc ListEventsDay(ListEventsRequest) returns (ListEventsResponse);
  rpc ListEventsWeek(ListEventsRequest) returns (ListEventsResponse);
  rpc ListEventsMonth(ListEventsRequest) returns (ListEventsResponse);

  rpc UpdateEvent(UpdateEventRequest) returns (UpdateEventResponse);
  rpc DeleteEvent(DeleteEventRequest) returns (DeleteEventResponse);
}
